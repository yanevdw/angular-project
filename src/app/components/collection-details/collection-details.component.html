<div class="w-full h-full flex flex-col justify-center items-start">
  @if (selectedCollection) {
    <p class="font-tilt-neon text-2xl py-4 text-pale-brown font-bold">
      {{ selectedCollection.length < 4 ? selectedCollection.toUpperCase() : selectedCollection.substring(0, 1).toUpperCase() + selectedCollection.substring(1, selectedCollection.length) }}
    </p>
  }
  <div
    class="books-container w-full h-full overflow-x-hidden overflow-y-scroll flex flex-row flex-wrap gap-6 justify-start items-center content-start"
  >

    @if (selectedCollection?.replace("-", " ") === "currently reading") {
      @if ((currentBooks$ | async)?.bookshelf!.currentlyReading) {
        @for (book of (currentBooks$ | async)!.bookshelf!.currentlyReading; track book.title) {
          <div
            [routerLink]="['book/' + book.isbn ]"
            class="book-container w-2/5 h-fit flex flex-col bg-seasalt p-2 rounded-xl md:w-[12%] lg:w-[9%] md:h-[30%]"
          >
            <div
              class="bg-transparent  w-full h-[70%] rounded-md basis-1/2"
            >
              <img alt="Book Cover Image" [src]=book.cover_url class="rounded-md object-fit w-full h-full">
            </div>
            <div class="basis-1/2 align-self-end flex flex-col justify-center gap-0">
              <p class="text-wrap font-tilt-neon text-pale-brown font-bold text-lg m-[4px 0 0]">
                {{ book.title.length > 9 ? book.title.slice(0, 10) + "..." : book.title }}
              </p>
              <p class="text-wrap font-tilt-neon text-amaranth text-sm">
                {{ book.author.length > 9 ? book.author.slice(0, 10) + "..." : book.author }} </p>
            </div>
          </div>

        }
      }

    } @else if (selectedCollection === "read") {
      @if ((currentBooks$ | async)?.bookshelf!.read) {

        @for (book of (currentBooks$ | async)!.bookshelf!.read; track book.title) {
          <div
            [routerLink]="['book/' + book.isbn ]"
            class="book-container w-2/5 h-fit flex flex-col bg-seasalt p-2 rounded-xl md:w-[12%] lg:w-[9%] md:h-[30%]"
          >
            <div
              class="bg-transparent  w-full h-[70%] rounded-md basis-1/2"
            >
              <img alt="Book Cover Image" [src]=book.cover_url class="rounded-md object-fit w-full h-full">
            </div>
            <div class="basis-1/2 align-self-end flex flex-col justify-center">
              <p class="text-wrap font-tilt-neon text-pale-brown font-bold text-lg">
                {{ book.title.length > 15 ? book.title.slice(0, 10) + "..." : book.title }}
              </p>

              <p class="text-wrap font-tilt-neon text-amaranth text-sm">
                {{ book.author.length > 9 ? book.author.slice(0, 10) + "..." : book.author }} </p>
            </div>
          </div>

        }
      }
    } @else if (selectedCollection === "tbr") {
      @if ((currentBooks$ | async)?.bookshelf!.tbr) {
        @for (book of (currentBooks$ | async)!.bookshelf!.tbr; track book.title) {
          <div
            [routerLink]="['book/' + book.isbn ]"
            class="book-container w-2/5 h-fit flex flex-col bg-seasalt p-2 rounded-xl md:w-[12%] lg:w-[9%]  md:h-[30%]"
          >
            <div
              class="bg-transparent  w-full h-[70%] rounded-md basis-1/2"
            >
              <img alt="Book Cover Image" [src]=book.cover_url class="rounded-md object-fit w-full h-full">
            </div>
            <div class="basis-1/2 align-self-end flex flex-col justify-center">
              <p class="text-wrap font-tilt-neon text-pale-brown font-bold text-lg">
                {{ book.title.length > 9 ? book.title.slice(0, 10) + "..." : book.title }}
              </p>

              <p class="text-wrap font-tilt-neon text-amaranth text-sm">
                {{ book.author.length > 9 ? book.author.slice(0, 10) + "..." : book.author }} </p>
            </div>
          </div>

        }
      }

    } @else if (selectedCollection === "dnf") {
      @if ((currentBooks$ | async)?.bookshelf!.dnf) {
        @for (book of (currentBooks$ | async)!.bookshelf!.dnf; track book.title) {
          <div
            [routerLink]="['book/' + book.isbn ]"
            class="book-container w-2/5 h-fit flex flex-col bg-seasalt p-2 rounded-xl md:w-[12%] lg:w-[9%] md:h-[30%]"
          >
            <div
              class="bg-transparent  w-full h-[70%] rounded-md basis-1/2"
            >
              <img alt="Book Cover Image" [src]=book.cover_url class="rounded-md object-fit w-full h-full">
            </div>
            <div class="basis-1/2 align-self-end flex flex-col justify-center">
              <p class="text-wrap font-tilt-neon text-pale-brown font-bold text-lg">
                {{ book.title.length > 9 ? book.title.slice(0, 10) + "..." : book.title }}
              </p>

              <p class="text-wrap font-tilt-neon text-amaranth text-sm">
                {{ book.author.length > 9 ? book.author.slice(0, 10) + "..." : book.author }}
              </p>
            </div>
          </div>
        }
      }
    }
  </div>
</div>
